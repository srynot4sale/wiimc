<?xml version="1.0" encoding="utf-8"?><!-- synced with XXX --><chapter id="encoding-guide"><title>Codificando con <application>MEncoder</application></title><sect1 id="menc-feat-dvd-mpeg4"><title>Haciendo un MPEG4 (&quot;DivX&quot;) de alta calidad al ripear una pelÃ­cula en DVD</title><para>  Ripear un tÃ­tulo de DVD en un archivo MPEG4 (DivX) de alta calidad  involucra algunas consideraciones. MÃ¡s abajo encontrarÃ¡ un ejemplo  del proceso cuando el objetivo no es conseguir un tamaÃ±o determinado  para el archivo (sino quizÃ¡ ajustar el resultado en 2GB).  <systemitem class="library">libavcodec</systemitem> serÃ¡ usado para el  video, y el audio serÃ¡ copiado como estÃ© sin cambios.</para><sect2 id="menc-feat-dvd-mpeg4-crop"><title>Recortando</title><para>  Reproduzca el DVD y ejecute el filtro de detecciÃ³n de recorte  (<option>-vf cropdetect</option>) en Ã©l. Esto le darÃ¡ un rectÃ¡ngulo de  recorte para usar en la codificaciÃ³n. La razÃ³n para el recorte es que muchas  pelÃ­culas no estÃ¡n en las relaciones de aspecto estÃ¡ndar (16/9 o 4/3), o,  por cualquier razÃ³n, la imagen no se ajusta bien dentro del marco de imagen.  AdemÃ¡s querrÃ¡ recortar las bandas negras durante el ripeo. TambiÃ©n mejora la  calidad de la imagen porque el filo de las bandas negras consume un montÃ³n  de bits. Un aspecto comÃºn es 2.35, el que se llama cinemascope. La mayorÃ­a  de las pelÃ­culas de blockbuster tienen esta razÃ³n de aspecto.</para></sect2><sect2 id="menc-feat-dvd-mpeg4-quality"><title>Nivel de calidad</title><para>  A continuaciÃ³n debe elegir el nivel de calidad deseado. Cuando no necesite  ajustar el tamaÃ±o resultante en un CD o en lo que sea, usar una cuantizaciÃ³n  constante, AKA calidad constante es una buena elecciÃ³n. De este modo cada  marco de imagen toma tantos bits como necesite para mantener el nivel de  calidad deseado, pero sin necesitar mÃºltiples pasadas en la codificaciÃ³n.  Con  <systemitem class="library">libavcodec</systemitem>, obtendrÃ¡ una calidad  constante usando  <option>-lavcopts vqscale=<replaceable>N</replaceable></option>.  <option>vqscale=3</option> debe darle un archivo por debajo de los 2GB  de tamaÃ±o, dependiendo principalmente de la duraciÃ³n de la pelÃ­cula y del  ruido en el video (a mÃ¡s ruido, mÃ¡s difÃ­cil de comprimir serÃ¡).</para></sect2><sect2 id="menc-feat-dvd-mpeg4-2gb"><title>Archivos mÃ¡s grandes de 2GB</title><para>  Si el archivo resultante codificado con calidad constante es mÃ¡s grande  de 2GB, deberÃ¡ crear un Ã­ndice para poder luego verlos correctamente.  Puede<itemizedlist><listitem><para>  reproducir el archivo con <option>-forceidx</option> para crear un  Ã­ndice sobre la marcha o bien  </para></listitem><listitem><para>  usar <option>-saveidx</option> para escribir un Ã­ndice a un archivo  una sola vez y luego <option>-loadidx</option> para usarlo cuando  reproduzca el archivo.  </para></listitem></itemizedlist>  Si esto le incomoda, quizÃ¡ quiera mantener el tamaÃ±o por debajo de los 2GB.</para><para>  Hay tres maneras de evitar esto. Puede intentar codificar de nuevo  usando <option>vqscale=4</option> y ver si tiene el tamaÃ±o de  archivo y la calidad de imagen aceptables. TambiÃ©n peude usar  <link linkend="menc-feat-divx4">codificaciÃ³n en 2 pasadas</link>.  Como va a copiar la pista de audio como estÃ¡ y conoce por eso  su tasa de bits, y ademÃ¡s sabe la duraciÃ³n de la pelÃ­cula, puede  calcular la tasa de bits de video requerida para dar a la opciÃ³n  <option>-lavcopts vbitrate=<replaceable>bitrate</replaceable></option>  sin usar  <link linkend="menc-feat-divx4">codificaciÃ³n en 3 pasadas</link>.</para><para>  La tercera y posiblemente la mejor opciÃ³n puede ser rebajar ligeramente  la resoluciÃ³n. El rebajado suaviza ligeramente y la pÃ©rdida de detalle  es visualmente menos daÃ±ina que el ver bloques y otros artifactos  causados por la compresiÃ³n MPEG. Escalar a un tamaÃ±o menor tambiÃ©n reduce  de manera efectiva el ruido en la imagen, lo que es aÃºn mejor, ya que  el ruido es mÃ¡s dificil de comprimir.</para></sect2><sect2 id="menc-feat-dvd-mpeg4-deinterlacing"><title>Desentrelazado</title><para>  Si la pelÃ­cula estÃ¡ entrelazada, puede que quiera desentrelazarla como  parte del ripeo. Es debatible si debe desentrelazarse en esta etaba. El  beneficio es que al desentrelazar mientras convierte a MPEG4 ocasiona  una mejor compresiÃ³n, y luego es mÃ¡s fÃ¡cil de ver con menos CPU en  monitores de ordenador ya que no es necesario el desentrelazado en  ese momento.</para><para>  Desentrelazar durante la etapa de ripeo es una buena idea dependiendo  del DVD. Si el DVD estÃ¡ hecho desde una pelÃ­cula, y tiene 24 fps,  puede desentrelazar durante el ripeo. Si, sin embargo, el original  es un video a 50/60 fps, convertirlo en un video desentrelazado  a 23.976/25 fps puede perder informaciÃ³n. Si decide desentrelazar, puede  experimentar con distintos filtros de desentrelazado despuÃ©s. Vea  <ulink url="http://www.wieser-web.de/MPlayer/">http://www.wieser-web.de/MPlayer/</ulink>  para ejemplos. Un buen punto de partida es <option>-vf pp=fd</option>.</para><para>  Si estÃ¡ haciendo las dos cosas, recortando y desentrelazando, desentrelace  <emphasis>antes</emphasis> de recortar. Actualmente, no es necesario  si el desplazamiento de recorte es vertical y mÃºltiplo de 2 pixels. Sin  embargo con algunos otros filtros, como dering, deberÃ¡ siempre hacer el recorte  lo Ãºltimo, es un buen hÃ¡bito poner el filtro de recortado el Ãºltimo.</para></sect2><sect2 id="menc-feat-dvd-mpeg4-telecine"><title>InversiÃ³n de telecine</title><para>  Si estÃ¡ ripeando un DVD PAL, con 25 fps, no necesita pensar en  los fps. Use directamente 25 fps. Los DVDs NTSC por otro lado estÃ¡n  a 29.97 fps (a menudo rondan los 30 fps, pero no tiene por quÃ©).  Si la pelÃ­cula fue grabada desde TV, no necesita de nuevo tocar  los fps. Pero si la pelÃ­cula fue grabada desde una pelÃ­cula, y por  lo tanto a (exactamente) 24 fps, debe ser convertida a 29.97 fps  cuando haga el DVD. Esta conversiÃ³n donde se aÃ±aden 12 campos a  cada 24 marcos de imagen de la pelÃ­cula se llama telecine. Para mÃ¡s  informaciÃ³n acerca de telecine, vea una  <ulink url="http://www.google.com/search?q=telecine+field+23.976">  bÃºsqueda en Google de &quot;telecine field 23.976&quot;</ulink>.</para><para>  En caso de que tenga un DVD telecine, puede que quiera hacer inversiÃ³n  del telecine, lo que significa convertir la pelÃ­cula a 23.976 fps  (29.97*4/5). De otro modo las panorÃ¡micas de cÃ¡mara irÃ¡n a trompicones  y muy mal. Puede usar <option>-ofps 23.976</option> para ello. Cualquier  cosas que estÃ© en pelÃ­culas y necesite telecine inverso, no se  mostrarÃ¡ en TV.</para></sect2><sect2 id="menc-feat-dvd-mpeg4-scaling"><title>Escalado y razÃ³n de aspecto</title><para>  Para mejor calidad, no escale la pelÃ­cula durante el ripeo. El  escalado a tamaÃ±o menor obviamente pierde detalle, y el escalado  a mayor tamaÃ±o causa artefactos y hace el archivo mayor en tamaÃ±o. Los  pixels en las pelÃ­culas DVD no son cuadrados, por eso las pelÃ­culas  en DVD incluyen informaciÃ³n acerca de la razÃ³n de aspecto correcta. Es  posible almacenar la razÃ³n de aspecto en la cabecera del archivo  de salida MPEG4. La mayorÃ­a de los reproductores de video ignoran  esta informaciÃ³n pero <application>MPlayer</application> la usarÃ¡.  Si solo va a usar <application>MPlayer</application> para ver el  archivo ripeado, no necesitarÃ¡ escalar la pelÃ­cula, solo pase  <option>-lavcopts autoaspect</option> a  <application>MEncoder</application> y las cosas funcionarÃ¡n  bien automÃ¡gicamente. Si debe escalar la pelÃ­cula, tenga  cuidado con el tamaÃ±o dado especialmente si estÃ¡ recortÃ¡ndola.</para></sect2><sect2 id="menc-feat-dvd-mpeg4-summary"><title>Sumando todo esto</title><para>  Con todo lo mencionado mÃ¡s arriba en mente, se puede usar una Ã³rden  de codificaciÃ³n como la siguiente  <screen>mencoder dvd://1 -aid 128 -oac copy -ovc lavc -lavcopts vcodec=mpeg4:vqscale=3:vhq:v4mv:trell:autoaspect \  -ofps 23.976 -vf crop=720:364:0:56 -o Harry_Potter_2.avi  </screen>  AquÃ­ <option>dvd://1</option> indica el tÃ­tulo de DVD a ripear.  La opciÃ³n <option>-aid 128</option> indica el uso de la pista 128,  y <option>-oac copy</option> para copiarla como estÃ¡. Puede usar  <application>MPlayer</application> para encontrar los valores  correctos para las opciones.</para><para>  Las opciones <option>vhq:v4mv:trell</option> para  <option>-lavcopts</option> mejoran la calidad frente a la tasa de bits, pero  hacen que la codificacion dure mÃ¡s. Especialmente <option>trell</option>  ralentiza la codificaciÃ³n pero incrementa la calidad visiblemente. Si quiere  desentrelazar, aÃ±ada un filtro <option>pp</option> a <option>-vf</option>,  por ejemplo <option>-vf pp=fd,crop=720:364:0:56</option> (en ese orden).  Si no necesita invertir el telecine, quite <option>-ofps 23.976</option>.</para></sect2></sect1><sect1 id="menc-feat-telecine"><title>CÃ³mo tratar con telecine y entrelazado con DVDs NTSC</title><formalpara><title>IntroducciÃ³n</title><para>  Le sugiero que visite esta pÃ¡gina si no entiende mucho lo que estÃ¡  escrito en este documento:  <ulink url="http://www.divx.com/support/guides/guide.php?gid=10">http://www.divx.com/support/guides/guide.php?gid=10</ulink>  Esta URL enlaza a una descripciÃ³n de lo que es telecine inteligible y  razonablemente comprensible.</para></formalpara><para>  Por razones tÃ©cnicas pertinentes a las limitaciones de reciente  hardware de televisiÃ³n, todos los videos que estÃ¡n pensados para ser  reproducidos en una televisiÃ³n NTSC deben tener 59.94 campos por segundo.  Las pelÃ­culas hechas-para-TV y los espectÃ¡culos son grabados  directamente a 24 o 23.976 marcos por segundo. Cuando una pelÃ­cula  para cine DVD es masterizada, el video es entonces convertido para la  televisiÃ³n usando un proceso llamado telecine.</para><para>  En un DVD, el video nunca se almacena como 59.94 campos por segundo.  Para video que es originalmente a 59.94, cada par de campos es  combinado para formar un marco de imagen, resultando en 29.97 marcos  por segundo. Los reproductores de DVD por hardware entonces leen un  indicador embebido en el flujo de video para determinar si son las  lÃ­neas pares o las impares las que deben formar el primer campo.</para><para>  Normalmente, 23.976 marcos de imagen por segundo se mantienen asÃ­  cuando son codificados en un DVD, y el reproductor de DVD debe  realizar el telecine sobre la marcha. Algunas veces, sin embargo,  el video es pasado por el proceso de telecine <emphasis>antes</emphasis>  de ser almacenado en el DVD; incluso aunque tenga originalmente  23.976 marcos de imagen por segundo, se hace que tenga 59.94 campos  por segundo, y es almacenado en disco como 29.97 marcos de imagen  por segundo.</para><para>  Cuando se observan como marcos individuales formados por 59.94 campos  por segundo de video, telecine o viceversa, el entrelazado es claramente  visible en cuanto hay movimiento, porque un campo (digamos, las lÃ­neas  numeradas pares) representa un momento en el tiempo 1/59.94 de un  segundo despuÃ©s de otro. Al reproducir video entrelazado en un  ordenador se ve mal porque el monitor tiene una resoluciÃ³n mayor  y porque el video es mostrado marco-tras-marco en lugar de  campo-tras-campo.</para><para>Notas:</para><itemizedlist><listitem><para>  Esta secciÃ³n solo se aplica a DVDs NTSC, y no a PAL.  </para></listitem><listitem><para>  El ejemplo <application>MEncoder</application> que hay a lo largo del  documento <emphasis role="bold">no</emphasis> estÃ¡ comprendido para  uso normal. SÃ­mplemente tiene lo mÃ­nimo requerido para codificar la  categorÃ­a de video pertinente. CÃ³mo hacer ripeados de DVD buenos o  ajuste fino de <systemitem class="library">libavcodec</systemitem>  para mÃ¡xima calidad no es el objetivo de este documento.  </para></listitem><listitem><para>  Hay un montÃ³n de notas a pie de pÃ¡gina especÃ­ficas en esta guia, enlazadas  como esto:  <link linkend="menc-feat-telecine-footnotes">[1]</link>  </para></listitem></itemizedlist><sect2 id="menc-feat-telecine-ident"><title>CÃ³mo decir el tipo de video que tiene</title><sect3 id="menc-feat-telecine-ident-progressive"><title>Progresivo</title><para>  Video progresivo fue grabado originalmente a 23.976 fps, y almacenado  en el DVD sin alteraciÃ³n.</para><para>  Cuando reproduce un DVD progresivo en <application>MPlayer</application>,  <application>MPlayer</application> mostrarÃ¡ la siguiente lÃ­nea tan pronto  como comience la pelÃ­cula:  <screen> demux_mpg: 24fps progressive NTSC content detected, switching framerate.</screen>  Desde este punto de vista, demux_mpg nunca debe decir que encuentra  &quot;contenido a 30fps NTSC.&quot;</para><para>  Cuando vea video progresivo, nunca debe ver ningÃºn entrelazado. Tenga  cuidado, sin embargo, porque algunas veces hay un poco de telecine  mezclado, donde no se lo espera. He encontrado DVDs de espectÃ¡culos de  TV que tienen un segundo de telecine en cada cambio de escena, o  en lugares aleatorios incluso. Una vez vi un DVD que tenÃ­a el primer  campo progresivo, y el segundo campo era telecine. Si quiere  <emphasis>realmente</emphasis> saberlo, puede escanear la pelÃ­cula  entera:  <screen>mplayer dvd://1 -nosound -vo null -benchmark</screen>  Usando <option>-benchmark</option> hace que  <application>MPlayer</application> reproduzca la pelÃ­cula tan rÃ¡pido  como pueda; tenga en cuenta, dependiendo de su hardware, puede tardar  bastante. Cada vez que demux_mpg informa de un cambio de tasa de bits,  la lÃ­nea inmediatamente por encima le dirÃ¡ el tiempo en el que el  cambio ha ocurrido.</para><para>  Algunas veces el video progresivo es referido como &quot;soft-telecine&quot;  porque estÃ¡ pensado para ser procesado en telecine por el reproductor de DVD.</para></sect3><sect3 id="menc-feat-telecine-ident-telecined"><title>Telecine</title><para>  Video con telecine fue grabado originalmente a 23.976 fps, pero fue  pasado por proceso de telecine <emphasis>antes</emphasis> de ser  escrito en el DVD.</para><para>  <application>MPlayer</application> no (nunca) informa de cambios  en la tasa de bits cuando reproduce video con telecine.</para><para>  Al ver video con telecine, verÃ¡ artefactos de entrelazado, que parecen  &quot;parpadear&quot;: repetidamente aparecen y desaparecen.  Puede verlo de cerca con  <orderedlist>  <listitem>    <screen>mplayer dvd://1 -speed 0.1</screen>    </listitem>  <listitem><para>    Busque una parte con movimiento.    </para></listitem>  <listitem><para>    Localice un patrÃ³n de bÃºsqueda-entrelazada y bÃºsqueda-progresiva    en marcos de imagen. Si el patrÃ³n que ve es PPPII,PPPII,PPPII,...    entonces el video es con telecine. Si ve algÃºn otro patrÃ³n, entonces    el video puede que estÃ© con telecine usando algÃºn mÃ©todo no estÃ¡ndar    y <application>MEncoder</application> no puede convertirlo sin pÃ©rdidas    en progresivo. Si no ve ningÃºn patrÃ³n, entonces lo mÃ¡s seguro es que    sea entrelazado.    </para></listitem>  </orderedlist></para><para>  Algunas veces el video telecine es referido como &quot;hard-telecine&quot;.</para></sect3><sect3 id="menc-feat-telecine-ident-interlaced"><title>Entrelazado</title><para>  El video entrelazado fue originalmente grabado a 59.94 campos por segundo,  y almacenado en el DVD como 29.97 marcos por segundo. El entreÃ±azado  es el resultado de combinar pares de campos en marcos, porque en cada  marco de imagen, cada campo ocupa 1/59.94 segundos.</para><para>  Como en el video en telecine, <application>MPlayer</application> nunca  debe informar de ningÃºn cambio en la tasa de bits mientras reproduce  contenido entrelazado.</para><para>  Cuando ve video entrelazado de cerca con <option>-speed 0.1</option>,  puede ver que cada marco simple es entrelazado.</para></sect3><sect3 id="menc-feat-telecine-ident-mixedpt"><title>Mezcla progresiva y telecine</title><para>  Todo video &quot;mezcla progresivo y telecine&quot; originalmente es a  23.976 marcos por segundo, pero algunas partes de Ã©l terminan siendo en  telecine.</para><para>  Cuando <application>MPlayer</application> reproduce esta categoria,  (a menudo de forma repetida) cambia entre &quot;30fps NTSC&quot; y  &quot;24fps progresivo NTSC&quot;. Consulte la parte de abajo de  la salida de <application>MPlayer</application> para ver estos  mensajes.</para><para>  DeberÃ¡ consultar las secciones de &quot;30fps NTSC&quot; para  asegurarse de que es telecine, y no simplemente entrelazado.</para></sect3><sect3 id="menc-feat-telecine-ident-mixedpi"><title>Mezcla de progresivo y entrelazado</title><para>  En el contenido &quot;mezcla de progresivo y entrelazado&quot;, el  video progresivo y entrelazado se colocan juntos.</para><para>  Esta categorÃ­a es similar a &quot;mezcla progresivo y telecine&quot;,  hasta que examine las secciones de 30fps y vea que no tiene el patrÃ³n  de telecine.</para></sect3></sect2><sect2 id="menc-feat-telecine-encode"><title>CÃ³mo codificar cada categorÃ­a</title><para>  Como dije antes al principio, las lÃ­neas de ejemplo de  <application>MEncoder</application> de mÃ¡s abajo <emphasis role="bold">no</emphasis>  son para ser usadas; solo son para demostrar los parÃ¡metros mÃ­nimos para codificar  en cada categorÃ­a.</para><sect3 id="menc-feat-telecine-encode-progressive"><title>Progresivo</title><para>  El video progresivo no requiere un filtrado especial para codificarlo. El  Ãºnico parÃ¡metro que seguramente necesita usar es <option>-ofps 23.976</option>.  Si no lo hace, <application>MEncoder</application> intentarÃ¡ codificar a  29.97 fps y marcos duplicados.</para><para>  <screen>mencoder dvd://1 -nosound -ovc lavc -ofps 23.976</screen></para></sect3><sect3 id="menc-feat-telecine-encode-telecined"><title>Telecine</title><para>  Telecine puede ser invertido para obtener el contenido 23.976 original,  usando un proceso llamado telecine-inverso.  <application>MPlayer</application> contiene dos filtros para  conseguir esto: <option>detc</option> y <option>ivtc</option>. Puede leer  la pÃ¡gina de manual para ver las diferencias, pero para DVDs nunca he tenido  problemas con <option>ivtc</option>. Note que  <emphasis role="bold">siempre</emphasis> deberÃ¡ hacer telecine-inverso  antes de cualquier reescalado; a menos que realmente sepa lo que estÃ¡ haciendo,  telecine-inverso antes de recortar tambiÃ©n  <link linkend="menc-feat-telecine-footnotes">[1]</link>. De nuevo,  necesitarÃ¡ <option>-ofps 23.976</option> tambiÃ©n.</para><para>  <screen>mencoder dvd://1 -nosound -vf ivtc=1 -ovc lavc -ofps 23.976</screen></para></sect3><sect3 id="menc-feat-telecine-encode-interlaced"><title>Entrelazado</title><para>  Para la mayor parte de los casos prÃ¡cticos no es posible obtener un  video progresivo completo de un contenido entrelazado. La Ãºnica manera  de hacerlo sin perder la mitad de la resoluciÃ³n vertical es doblar la  tasa de imÃ¡genes por segundo e intentar &quot;adivinar&quot; como se  obtienen las correspondientes lÃ­neas para cada campo (esto ocasiona  problemas - vea el mÃ©todo 3).</para><orderedlist><listitem><para>  Codifique el video en formato entrelazado. Normalmente, el entrelazado  permite al codificador comprimir bien, pero  <systemitem class="library">libavcodec</systemitem> tiene dos  parÃ¡metros especÃ­ficos para jugar con video entrelazado un poco mejor:  <option> ildct</option> y <option>ilme</option>. AdemÃ¡s, es  altamente recomendable usar <option>mbd=2</option>  <link linkend="menc-feat-telecine-footnotes">[2] </link> porque codifica  los macrobloques como no entrelazados en lugares donde no hay movimiento.  Note que <option>-ofps</option> NO es necesario aquÃ­.  <screen>mencoder dvd://1 -nosound -ovc lavc -lavcopts ildct:ilme:mbd=2</screen>  </para></listitem><listitem><para>  Use un filtro de desentrelazado antes de codificar. Hay varios  filtros disponibles para elegir, cada uno con sus ventajas y sus  desventajas. Consulte <option>mplayer -pphelp</option> para ver  quÃ© hay disponible (grep &quot;deint&quot;), y busque en las  <ulink url="http://www.mplayerhq.hu/design7/mailing_lists-es.html">  listas de correo <application>MPlayer</application></ulink> para encontrar  discusiones acerca de varios filtros. De nuevo, la tasa de bits por segundo  no cambia, nada de <option>-ofps</option>. AdemÃ¡s, el desentrelazado debe  hacerse despuÃ©s del recortado <link linkend="menc-feat-telecine-footnotes">  [1]</link> y antes del escalado.  <screen>mencoder dvd://1 -nosound -vf pp=lb -ovc lavc</screen>  </para></listitem><listitem><para>  Desafortunadamente, esta opciÃ³n tiene fallos con  <application>MEncoder</application>; funcionarÃ¡ bien con  <application>MEncoder G2</application>, pero todavÃ­a no estÃ¡ disponible.  Puede experimentar cuelgues del sistema. De todos modos, el propÃ³sito  de <option>-vf tfields</option> es crear una tasa de bits completa por  campo, que haga que la tasa completa sea de 59.94. La ventaja de esta  aproximaciÃ³n es que no hay pÃ©rdida de datos; sin embargo, como cada marco  viene solo con un campo, las lÃ­neas que faltan tienen que se interpoladas  de alguna manera. No hay buenos mÃ©todos para generar estos datos  que faltan, y el resultado serÃ¡ un poco similar al que se obtiene cuando  se usan algunos filtros de desentrelazado. La generaciÃ³n de las lÃ­neas  que faltan crean otros problemas, sÃ­mplemente porque se dobla la cantidad  de datos. Por eso, tasas de bits mÃ¡s altas para la codificaciÃ³n son  requeridas para mantener la calidad, y se usa mÃ¡s potencia de CPU para  la codificaciÃ³n y la decodificaciÃ³n. tfields tiene varias opciones  distintas para crear las lÃ­neas que faltan en cada marco. Si usa  este mÃ©todo, refiÃ©rase al manual, y elija la opciÃ³n que mejor se ajuste  para su material. Note que cuando use <option>tfields</option>  <emphasis role="bold">tiene que</emphasis> especificar <option>-fps</option>  y <option>-ofps</option> para doblar la tasa de bits de su fuente  original.  <screen>mencoder dvd://1 -nosound -vf tfields=2 -ovc lavc -fps 59.94 -ofps 59.94</screen>  </para></listitem><listitem><para>  Si planea subescalar dramÃ¡ticamente, puede codificar solo uno de los  dos campos. Por supuesto, perderÃ¡ la mitad de la resoluciÃ³n vertical,  pero si planea subescalar a al menos 1/2 del original, la pÃ©rdida no  importa mucho. El resultado serÃ¡ un archivo progresivo de 29.97 marcos  por segundo. El procedimiento es usar <option>-vf field</option>, entonces  recortar <link linkend="menc-feat-telecine-footnotes">[1]</link> y  escalar apropiadamente. Recuerde que tiene que ajustar la escala para  compensar la resoluciÃ³n vertical que estÃ¡ siendo perdida.  <screen>mencoder dvd://1 -nosound -vf field=0 -ovc lavc</screen>  </para></listitem></orderedlist></sect3><sect3 id="menc-feat-telecine-encode-mixedpt"><title>Mezcla de progresivo y telecine</title><para>  Para mezclar video progresivo y telecine en un video completamente  progresivo, las partes en telecine tienen que pasar por el proceso  de telecine-inverso. Hay dos filtros que realizan esto nativamente, pero  una soluciÃ³n mejor casi siempre es usar dos filtros conjuntamente  (lea mÃ¡s adelante para mÃ¡s detalles).</para><itemizedlist><listitem><para>  Actualmente el mÃ©todo mÃ¡s fiable para tratar este tipo de video  es, en lugar de hacer telecine-inverso con las partes en telecine,  pasar a telecine las partes que no lo son y luego hacer telecine-inverso  del video completo. Â¿Suena confuso? softpulldown es un filtro que  hadce que el video se haga completamente en telecine. Si se sigue  softpulldown con alguno de entre <option>detc</option> o  <option>ivtc</option>, el resultado final serÃ¡ completamente progresivo.  El recortado y el escalado debe hacerse despuÃ©s de las operaciones de  telecine-inverso, y <option>-ofps 23.976</option> es necesario.  <screen>mencoder dvd://1 -nosound -vf softpulldown,ivtc=1 -ovc lavc -ofps 23.976</screen>  </para>  </listitem><listitem><para>  <option>-vf pullup</option> estÃ¡ diseÃ±ado para hacer telecine-inverso  con material en telecine mientras que deja el video progresivo como  datos aislados. Pullup no funciona muy bien con el  <application>MEncoder</application> actual, realmente estÃ¡ hecho  para ser usado con <application>MEncoder G2</application> (cuando estÃ©  listo). Funciona bien sin <option>-ofps</option>, pero  <option>-ofps</option> se necesita para prevenir salida con saltos.  Con <option>-ofps</option>, algunas veces falla. Los problemas vienen  de mantener la sincronizaciÃ³n entre el audio y el video: elimina  marcos antes de enviarlos a la cadena de filtros, en lugar de despuÃ©s.  Como resultado, <option>pullup</option> algunas veces pierde los  datos que necesita.  </para>  <para>  Si <application>MEncoder</application> descarta demasiados marcos de  imagen en una fila, se carga los buffers <option>pullup</option> y  causa el fallo del programa.  </para>  <para>  Incluso si <application>MEncoder</application> solo descarta un marco,  <option>pullup</option> sigue sin verse bien, y puede resultar en  una secuencia incorrecta de marcos de imagen. Incluso si no causa  un fallo del sistema, <option>pullup</option> es capaz de hacer decisiÃ³n  de correcciones sobre como reensamblar los marcos progresivos, y  hacer coincidir campos juntos de manera incorrecta o descargar  algunos campos para compensar.  </para>  </listitem><listitem><para>  Recientemente he usado <option>-vf filmdint</option> yo mismo, pero  esto es lo que dice D Richard Felker III:  <blockquote><para>EstÃ¡ bien, pero IMO (en mi opiniÃ³n) intenta    densentrelazar en lugar de hacer inversiÃ³n del telecine    demasiado a menudo (muy similar a los reproductores de sobremesa    de DVD y TVs progresivas) que causan parpadeos que afean y    otros artefactos. Si estÃ¡ haciendo uso de esto, necesita por lo    menos perder algÃºn tiempo haciendo un ajuste fino de las opciones    y viendo la salida para asegurarse de que no estÃ¡ haciendolo mal.    </para></blockquote>  </para></listitem></itemizedlist></sect3><sect3 id="menc-feat-telecine-encode-mixedpi"><title>Mezcla de progresivo y entrelazado</title><para>  Hay dos opciones para tratar esta categorÃ­a, cada una con sus  compromisos. Debe decidir si se quiere basar en la duraciÃ³n  o localizaciÃ³n de cada tipo.</para><itemizedlist><listitem><para>  TrÃ¡telo como progresivo. Las partes entrelazadas parecen entrelazadas,  y algunos campos entrelazados son descartados, resultando en un  poco dispares y con saltos. Puede usar un filtro de postprocesado  si quiere, pero degradarÃ¡ ligeramente las partes progresivas.  </para>  <para>  Definitivamente esta opciÃ³n no debe ser usada si quiere eventualmente  mostrar el video en un dispositivo entrelazado (con una tarjeta de TV,  por ejemplo). Si tiene marcos entrelazados en un video de 23.976 marcos  por segundo, deben ponerse en telecine junto con los marcos  progresivos. La mitad de los "marcos" entrelazados serÃ¡n mostrados  en duraciÃ³n de tres campos (3/59.94 segundos), resultando en un  efecto de parpadeo &quot;con salto atrÃ¡s en el tiempo&quot; lo que hace  que se vea bastante mal. Si quiere intentarlo,  <emphasis role="bold">debe</emphasis> usar un filtro de desentrelazado  como <option>lb</option> o <option>l5</option>.  </para>  <para>  TambiÃ©n puede ser una mala idea para una pantalla progresiva.  DescartarÃ¡ pares de campos consecutivos entrelazados, resultando  en una discontinuidad que puede ser mÃ¡s visible que con el segundo  mÃ©todo, el cual muestra algunos marcos progresivos dos veces. El  video entrelazado a 29.97 marcos por segundo ya se ve realmente con  saltitos porque debe ser mostrado a 59.94 campos por segundo, lo que  hace que los marcos duplicados no estÃ©n durante mucho tiempo en pantalla.  </para>  <para>  En cualquier caso, es mejor considerar su contenido y cÃ³mo quiere  mostrarlo. Si su video es 90% progresivo y no tiene intenciÃ³n de  mostrarlo en una TV, deberÃ­a usar una aproximaciÃ³n progresiva. Si  es solo la mitad progresivo, probablemente querrÃ¡ codificarlo como  estÃ¡ si todo estÃ¡ entrelazado.  </para>  </listitem><listitem><para>  TrÃ¡telo como entrelazado. Algunas caracterÃ­sticas de las partes  progresivas serÃ¡n tratadas por duplicado, resultando en una imagen  a saltos. De nuevo, los filtros de desentrelazado pueden degradar  ligeramente las partes progresivas.  </para></listitem></itemizedlist></sect3></sect2><sect2 id="menc-feat-telecine-footnotes"><title>Notas a pie de pÃ¡gina</title><orderedlist><listitem><formalpara>  <title>Acerca del recortado:</title>  <para>  Los datos de video de los DVDs son almacenados en un formato llamado  YUV 4:2:0. En video YUV, la luminancia (&quot;brillo&quot;) y la  crominancia (&quot;color&quot;) se almacenan por separado. Debido  a que el ojo humano es menos sensible al color que al brillo, en una  imagen YUV 4:2:0 hay solo un pixel de crominancia por cada cuatro de  luminancia (dos por lado) teniendo el pixel de crominancia comÃºn.  Debe recortar YUV progresivo 4:2:0 a resoluciones pares, e incluso usar  desplazamientos pares. Por ejemplo, <option>crop=716:380:2:26</option>  es CORRECTO pero <option>crop=716:380:3:26</option> no lo es.  </para>  </formalpara>  <para>  Cuando estÃ© tratando con YUV 4:2:0 entrelazado, la situaciÃ³n es un  poco mÃ¡s complicada. En lugar de cada cuatro pixels de luminancia en  el <emphasis>marco</emphasis> compartiendo uno de crominancia, cada  cuatro de luminancia en cada <emphasis>campo</emphasis> comparten un  pixel de crominancia. Cuando los campos son entrelazados para formar  un marco, cada scanline es un pixel de alta. Ahora, en lugar de cada  cuatro pixels de luminancia en un cuadrado, hay dos pixels lado-a-lado,  y los otros dos pixels estÃ¡n lado-a-lado dos scanlines mÃ¡s abajo. Los dos  pixels de luminancia en la scanline intermedia son del otro campo, y  por eso comparten un pixel distinto de crominancia con dos pixels de  luminancia dos scanlines mÃ¡s allÃ¡. Toda esta confusiÃ³n hace necesario  tener dimensiones y desplazamientos de recorte vertical en mÃºltiplos  de cuatro. El horizontal puede quedarse igual.  </para>  <para>  Para video en telecine, recomiendo que se recorte despuÃ©s de hacer  la inversiÃ³n del telecine. Una vez que el video es progresivo solo  necesita recortar con nÃºmeros pares. Si realmente quiere ganar algo  de velocidad mÃ¡s que lo que el primer recortado puede ofrecer, debe  recortar verticalmente en mÃºltiplos de cuatro o bien usar el filtro  de telecine-inverso con los datos apropiados.  </para>  <para>  Para video entrelazado (no telecine), siempre debe recortar  verticalmente por mÃºltiplos de cuatro a menos que use  <option>-vf field</option> antes de recortar.  </para>  </listitem><listitem><formalpara>  <title>Acerca de los parÃ¡metros de codificado y la calidad:</title>  <para>  Solo porque yo recomiendo <option>mbd=2</option> aquÃ­ no significa que  deba ser usado siempre. Junto con <option>trell</option>,  <option>mbd=2</option> es una de las dos opciones de  <systemitem class="library">libavcodec</systemitem> que pueden  incrementar la calidad, y siempre debe usar al menos estos dos  a menos que la pÃ©rdida de velocidad sea prohibitiva (e.g. codificaciÃ³n  en tiempo real). Hay muchas otras opciones para  <systemitem class="library">libavcodec</systemitem> que incrementan  la calidad de la codificaciÃ³n (e incrementa la velocidad de la codificaciÃ³n)  pero eso queda mÃ¡s allÃ¡ del objeto de este documento.  </para>  </formalpara>  </listitem></orderedlist></sect2></sect1></chapter>